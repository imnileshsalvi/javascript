<!doctype html>
<html>
<head>
    <title>Learning Javascript</title>

    <meta charset="utf-8" />
    <meta http-equiv="Content-type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <style type="text/css">
    body {
        background-color: #f0f0f2;
        margin: 0;
        padding: 0;
        font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
    }
    div {
        width: 625px;
		height: 625px;
        margin: 1em auto;
        background-color: #fff;
        border-radius: 1em;
    }
    #box-1 {
        width: 200px;
        height: 200px;
        background-color: red;
		visibility:visible;
		float: left;
		margin:0px;
    }
    #box-2 {
        width: 200px;
        height: 200px;
        background-color: red;
		visibility:visible;
		float: left;
		margin:0px;
    }
    #box-3 {
        width: 200px;
        height: 200px;
        background-color: red;
		visibility:visible;
		float: left;
		margin:0px;
    }
    #box-4 {
        width: 200px;
        height: 200px;
        background-color: red;
		visibility:visible;
		float: left;
		margin:0px;
    }
	.box1 {
        width: 200px;
        height: 40px;
        margin: 5px 5px 0 5px;
        padding-left: 100px;
        background-color: pink;
		visibility:visible;
		float: left;
	}
	.box2 {
        width: 610px;
        height: 40px;
        margin: 5px 5px 0 5px;
        background-color: lime;
		color: white;
		visibility:visible;
		float: left;
		align: center;
	}
	#clock {
		align:center;
		position:relative;
		top: -6px;
		vertical-align: super;
	}
	#demo {
		align:center;
	}
	#score {
		align:center;
	}
	div table{
		padding: 30px 0 0 0;
		margin: 5em auto;
	}
	div tr {
		padding: 0px;
		margin: 0;
	}
	
    </style>    
</head>

<body>
<div>	
	<table>
	<tr><td>
	<div id="box-1"></div>
	</td>
	<td>
	<div id="box-2"></div>
	</td></tr>
	<tr><td>
	<div id="box-3"></div>
	</td>
	<td>
	<div id="box-4"></div>
	</td></tr>
	</table>
	<div class="box1"> 
		<p id="clock"></p>
	</div>
	<div class="box1"> 
		<p id="demo"></p>
	</div>
	<div class="box2"> 
		<p id="score"></p>
	</div>
</div>
	<script type="text/javascript">
		var numClicked=0, responseTimeArray = new Array();
		var myVar=setInterval(function(){myTimer()},1000);
		var bx=0, bxStr="";

		function myTimer() {
			var d = new Date();
			document.getElementById("clock").innerHTML = d.toLocaleTimeString();
		}

		var delay=0; showTime=0, clickTime=0;
		document.getElementById("box-1").onclick=boxClicked;
		document.getElementById("box-2").onclick=boxClicked;
		document.getElementById("box-3").onclick=boxClicked;
		document.getElementById("box-4").onclick=boxClicked;
		function boxClicked() {
			if (clickTime==0) {
				//this is the first click
				clickTime = 1;
			} else {
				var d = new Date();
				clickTime=d.getTime();
			}
			responseTimeArray.push((clickTime-showTime)/1000);
			if (responseTimeArray.length == 10) {
				for (var z=0;z<responseTimeArray.length;z++){
					console.log(responseTimeArray[z]);
				}
				var avgResp = avgRespTime();
				document.getElementById("demo").innerHTML = "Game Over!";
				document.getElementById("box-1").style.visibility="hidden";
				document.getElementById("box-2").style.visibility="hidden";
				document.getElementById("box-3").style.visibility="hidden";
				document.getElementById("box-4").style.visibility="hidden";
				document.getElementById("score").innerHTML = "  Average Response Time  =  " + avgResp.toPrecision(5);
			} else {
				hideBox();
			}
		}
		function hideBox() {
			document.getElementById("box-1").style.visibility="hidden";
			document.getElementById("box-2").style.visibility="hidden";
			document.getElementById("box-3").style.visibility="hidden";
			document.getElementById("box-4").style.visibility="hidden";
			delay=Math.floor(Math.random()*5000);
			setTimeout(showBox, delay);
		}
		function showBox() {
			bx=Math.floor(Math.random()*4)+1;
			bxStr="box-"+bx;
			document.getElementById("demo").innerHTML = bxStr;
			document.getElementById(bxStr).style.visibility="visible";
			var d = new Date();
			showTime=d.getTime();
		}
		function avgRespTime() {
			var avg=0;
			for (var z=1;z<responseTimeArray.length;z++) {
				avg=avg+responseTimeArray[z];
			}
			avg=avg/(responseTimeArray.length - 1);
			return(avg);
		}
	</script>

</body>
</html>
